"use strict";
exports.__esModule = true;
exports.createInsightsClient = void 0;
var insights_1 = require("./insights");
var _getFunctionalInterface_1 = require("./_getFunctionalInterface");
var uuid_1 = require("./utils/uuid");
var package_json_1 = require("../package.json");
function createInsightsClient(requestFn) {
    var aa = _getFunctionalInterface_1.getFunctionalInterface(new insights_1["default"]({ requestFn: requestFn }));
    if (typeof window === "object") {
        if (!window.AlgoliaAnalyticsObject) {
            var pointer = void 0;
            do {
                pointer = uuid_1.createUUID();
            } while (window[pointer] !== undefined);
            window.AlgoliaAnalyticsObject = pointer;
            window[window.AlgoliaAnalyticsObject] = aa;
        }
    }
    aa.version = package_json_1.version;
    return aa;
}
exports.createInsightsClient = createInsightsClient;
